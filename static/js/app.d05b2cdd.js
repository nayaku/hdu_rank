(function(t){function e(e){for(var n,i,s=e[0],d=e[1],l=e[2],c=0,u=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);m&&m(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,s=1;s<o.length;s++){var d=o[s];0!==r[d]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},r={app:0},a=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var m=d;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"3dfd":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[o("b-navbar-brand",[t._v("HDU排行榜")]),o("b-navbar-brand",[o("span",{staticStyle:{"font-size":"x-small"}},[o("a",{staticStyle:{color:"rgba(255,255,255,0.4)"},attrs:{href:"https://github.com/736248591/hdu_rank"}},[t._v("GitHub地址")])])]),o("b-navbar-nav",{staticClass:"ml-auto"},[t.user||t.admin?t.user?o("b-nav-item-dropdown",{attrs:{text:"欢迎，"+t.user.uid,right:""}},[o("b-dropdown-item",{on:{click:function(e){return t.showChangePwdModal("user",t.user)}}},[t._v("修改密码")]),o("b-dropdown-item",{on:{click:function(e){t.changeMottoModalShow=!0}}},[t._v("修改格言")]),o("b-dropdown-item",{on:{click:function(e){t.changeUserHtmlModalShow=!0}}},[t._v("自定义页面")]),o("b-dropdown-item",{on:{click:function(e){return t.remove()}}},[t._v("永久删除账号")]),o("b-dropdown-item",{on:{click:t.logout}},[t._v("登出")])],1):t.admin?o("b-nav-item-dropdown",{attrs:{text:"欢迎，"+t.admin.uid,right:""}},[o("b-dropdown-item",{on:{click:function(e){return t.showChangePwdModal("admin",t.admin)}}},[t._v("修改密码")]),o("b-dropdown-item",{on:{click:function(e){t.addNoticeModalShow=!0}}},[t._v("修改公告")]),t.admin.is_super?o("b-dropdown-item",{on:{click:function(e){t.listAdminModalShow=!0}}},[t._v("管理员列表")]):t._e(),o("b-dropdown-item",{on:{click:t.logout}},[t._v("登出")])],1):t._e():o("b-nav-item-dropdown",{attrs:{text:"用户",right:""}},[o("b-dropdown-item",{on:{click:function(e){t.loginModalShow=!0}}},[t._v("登录")]),o("b-dropdown-item",{on:{click:function(e){t.registerUserModalShow=!0}}},[t._v("注册")])],1)],1)],1),o("div",{staticClass:"py-4"},[o("b-container",[o("b-row",[o("vue-markdown",{attrs:{source:t.notice}})],1)],1)],1),o("div",{staticClass:"py-2"},[o("b-container",[o("b-row",[o("b-table",{attrs:{items:t.users,fields:t.userTableFields,responsive:!0,"primary-key":"id"},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v("\n            "+t._s(e.index+1)+"\n          ")]}},{key:"cell(solved_num)",fn:function(e){return[null!==e.item.solved_num?[t._v("\n              "+t._s(e.value)+"\n            ")]:"unchecked"===e.item.status?o("span",{staticClass:"text-warning"},[t._v("\n              未确认\n            ")]):o("span",{staticClass:"text-success"},[t._v("\n              爬取中\n            ")])]}},{key:"cell(operator)",fn:function(e){return[o("b-dropdown",{attrs:{right:"",text:"操作"}},[o("b-dropdown-item",{attrs:{variant:"success",disabled:"unchecked"!==e.item.status},on:{click:function(o){return t.confirmUser(e.item.id)}}},[t._v("确认用户\n              ")]),o("b-dropdown-item",{on:{click:function(o){return t.showChangePwdModal("user",e.item)}}},[t._v("修改密码")]),o("b-dropdown-item",{attrs:{variant:"danger"},on:{click:function(o){return t.remove(e.item.id)}}},[t._v("删除用户")])],1)]}}])})],1),o("b-row",[t._v("\n        爬虫状态：\n        "),o("span",{class:t.crawlStatusClass,domProps:{textContent:t._s(t.crawlStatusString)}}),t.admin?["stopped"!==t.crawlStatus?o("b-button",{attrs:{variant:"danger"},on:{click:t.stopCrawl}},[t._v("停止\n          ")]):o("b-button",{attrs:{variant:"primary"},on:{click:t.beginCrawl}},[t._v("启动")])]:t._e()],2)],1)],1),t._m(0),o("b-modal",{attrs:{title:"登录","ok-title":"确认","cancel-title":"取消","ok-disabled":t.loginModalOkDisabled},on:{ok:t.login},model:{value:t.loginModalShow,callback:function(e){t.loginModalShow=e},expression:"loginModalShow"}},[o("b-form",{on:{submit:t.login}},[o("b-form-group",{attrs:{label:"登录账号："}},[o("b-form-input",{attrs:{state:t.loginServerFeedbackState,required:"",trim:"",type:"text"},on:{input:function(e){t.loginServerFeedbackState=null}},model:{value:t.loginUid,callback:function(e){t.loginUid=e},expression:"loginUid"}})],1),o("b-form-group",{attrs:{label:"密码："}},[o("b-form-input",{attrs:{state:t.loginServerFeedbackState,required:"",trim:"",type:"password"},on:{input:function(e){t.loginServerFeedbackState=null}},model:{value:t.loginPwd,callback:function(e){t.loginPwd=e},expression:"loginPwd"}})],1),o("b-form-group",[o("b-form-invalid-feedback",{attrs:{state:t.loginServerFeedbackState}},[t._v("\n          "+t._s(t.loginServerFeedbackString)+"\n        ")])],1),o("b-form-group",[o("b-form-checkbox",{attrs:{switch:""},model:{value:t.isAdminLoginMode,callback:function(e){t.isAdminLoginMode=e},expression:"isAdminLoginMode"}},[t._v("\n          管理员登录模式\n        ")])],1)],1)],1),o("b-modal",{attrs:{title:"注册","hide-footer":""},on:{show:t.formReset},model:{value:t.registerUserModalShow,callback:function(e){t.registerUserModalShow=e},expression:"registerUserModalShow"}},[o("b-form",{on:{submit:t.registerUser}},[o("b-form-group",{attrs:{label:"登录账号："}},[o("b-form-input",{attrs:{state:t.formUidState,required:"",trim:"",type:"text"},on:{blur:t.validateFormUid},model:{value:t.formUid,callback:function(e){t.formUid=e},expression:"formUid"}}),o("b-form-invalid-feedback",{attrs:{state:t.formUidState}},[t._v("\n          "+t._s(t.formUidServerFeedbackString)+"\n        ")])],1),o("b-form-group",{attrs:{label:"密码："}},[o("b-form-input",{attrs:{state:t.formPwdState,required:"",trim:"",type:"password"},model:{value:t.formPwd,callback:function(e){t.formPwd=e},expression:"formPwd"}})],1),o("b-form-invalid-feedback",{attrs:{state:t.formPwdState}},[t._v("\n        "+t._s(t.formPwdFeedbackString)+"\n      ")]),o("b-progress",{directives:[{name:"show",rawName:"v-show",value:t.formPwd,expression:"formPwd"}],attrs:{value:t.formPwdStrengthScore,max:"5",animated:"",variant:t.formPwdProgressVariant}}),o("b-form-group",{attrs:{label:"确认密码"}},[o("b-form-input",{attrs:{state:t.formConfirmPwdState,required:"",trim:"",type:"password"},model:{value:t.formConfirmPwd,callback:function(e){t.formConfirmPwd=e},expression:"formConfirmPwd"}}),o("b-form-invalid-feedback",{attrs:{state:t.formConfirmPwdState}},[t._v("\n          两次输入的密码不一致！\n        ")])],1),o("b-form-group",{attrs:{label:"班级名："}},[o("b-form-input",{attrs:{state:t.formClassNameState,trim:"",type:"text"},model:{value:t.formClassName,callback:function(e){t.formClassName=e},expression:"formClassName"}}),o("b-form-invalid-feedback",{attrs:{state:t.formClassNameState}},[t._v("\n          班级名应该小于等于24。\n        ")])],1),o("b-form-group",{attrs:{label:"姓名："}},[o("b-form-input",{attrs:{state:t.formUserNameState,required:"",trim:"",type:"text"},model:{value:t.formUserName,callback:function(e){t.formUserName=e},expression:"formUserName"}}),o("b-form-invalid-feedback",[t._v("\n          姓名长度应该在2-16之间。\n        ")])],1),o("b-form-group",{attrs:{label:"杭电账号："}},[o("b-form-input",{attrs:{state:t.formAccountState,required:"",trim:""},on:{blur:t.validateFormAccount},model:{value:t.formAccount,callback:function(e){t.formAccount=e},expression:"formAccount"}})],1),o("b-form-invalid-feedback",{attrs:{state:t.formAccountState}},[t._v("\n        "+t._s(t.formAccountServerFeedbackString)+"\n      ")]),o("b-form-group",{attrs:{label:"格言："}},[o("b-form-textarea",{attrs:{state:t.formMottoState,rows:"3"},model:{value:t.formMotto,callback:function(e){t.formMotto=e},expression:"formMotto"}}),o("b-form-invalid-feedback",{attrs:{state:t.formMottoState}},[t._v("\n          格言长度不应该大于255。\n        ")])],1)],1),o("hr"),o("b-container",[o("b-row",{attrs:{"align-h":"end"}},[o("b-button",{attrs:{variant:"info"},on:{click:t.formReset}},[t._v("重置\n        ")]),t._v("  \n        "),o("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.registerUserModalShow=!1}}},[t._v("取消\n        ")]),t._v("  \n        "),o("b-button",{attrs:{variant:"primary",disabled:t.addUserModalOkDisabled},on:{click:t.registerUser}},[t._v("确认\n        ")]),t._v("  \n      ")],1)],1)],1),o("b-modal",{attrs:{title:"修改密码","ok-title":"确认","cancel-title":"取消","ok-disabled":t.changePwdModalOkDisabled},on:{ok:t.changePwd,show:t.formReset,close:t.closeChangePwdModal},model:{value:t.changePwdModalShow,callback:function(e){t.changePwdModalShow=e},expression:"changePwdModalShow"}},[o("b-form",[o("b-form-group",{attrs:{label:"密码："}},[o("b-form-input",{attrs:{state:t.formPwdState,required:"",trim:"",type:"password"},model:{value:t.formPwd,callback:function(e){t.formPwd=e},expression:"formPwd"}})],1),o("b-form-invalid-feedback",{attrs:{state:t.formPwdState}},[t._v("\n        "+t._s(t.formPwdFeedbackString)+"\n      ")]),o("b-progress",{directives:[{name:"show",rawName:"v-show",value:t.formPwd,expression:"formPwd"}],attrs:{value:t.formPwdStrengthScore,max:"5",animated:"",variant:t.formPwdProgressVariant}}),o("b-form-group",{attrs:{label:"确认密码"}},[o("b-form-input",{attrs:{state:t.formConfirmPwdState,required:"",trim:"",type:"password"},model:{value:t.formConfirmPwd,callback:function(e){t.formConfirmPwd=e},expression:"formConfirmPwd"}}),o("b-form-invalid-feedback",{attrs:{state:t.formConfirmPwdState}},[t._v("\n          两次输入的密码不一致！\n        ")])],1)],1)],1),o("b-modal",{attrs:{title:"修改密码","ok-title":"确认","cancel-title":"取消","ok-disabled":t.changeMottoModalOkDisabled},on:{ok:t.changeMotto,show:function(e){t.formAccount=t.user.account}},model:{value:t.changeMottoModalShow,callback:function(e){t.changeMottoModalShow=e},expression:"changeMottoModalShow"}},[o("b-form",[o("b-form-group",{attrs:{label:"格言："}},[o("b-form-textarea",{attrs:{state:t.formMottoState,rows:"3"},model:{value:t.formMotto,callback:function(e){t.formMotto=e},expression:"formMotto"}}),o("b-form-invalid-feedback",{attrs:{state:t.formMottoState}},[t._v("\n          格言长度不应该大于255。\n        ")])],1)],1)],1),o("b-modal",{attrs:{size:"xl",title:"自定义页面代码","ok-title":"确认","cancel-title":"取消"},on:{ok:t.changeUserHtml,show:function(e){t.userHtml=t.user.html}},model:{value:t.changeUserHtmlModalShow,callback:function(e){t.changeUserHtmlModalShow=e},expression:"changeUserHtmlModalShow"}},[o("prism-editor",{attrs:{language:"html",lineNumbers:!0},model:{value:t.userHtml,callback:function(e){t.userHtml=e},expression:"userHtml"}})],1),o("b-modal",{attrs:{size:"xl",title:"管理员列表","hide-footer":""},on:{show:t.getAdminList},model:{value:t.listAdminModalShow,callback:function(e){t.listAdminModalShow=e},expression:"listAdminModalShow"}},[o("b-table",{attrs:{items:t.adminList,fields:t.adminFields,"primary-key":"id"},scopedSlots:t._u([{key:"cell(is_super)",fn:function(e){return[e.item.id!==t.admin.id?o("b-button",{attrs:{variant:"link"},on:{click:function(o){return t.changeSuperAdmin(e.item)}}},[e.value?o("span",{staticClass:"text-success"},[t._v("Yes")]):o("span",{staticClass:"text-danger"},[t._v("No")])]):t._e()]}},{key:"cell(operator)",fn:function(e){return[o("b-button",{attrs:{variant:"warning"},on:{click:function(o){return t.showChangePwdModal("admin",e.item)}}},[t._v("修改密码")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){return t.remove(e.item.id,!1)}}},[t._v("永久删除")])]}}])}),o("b-form",{attrs:{inline:""}},[o("label",{attrs:{for:"admin_form_uid_input"}},[t._v("登录账号")]),o("b-form-input",{attrs:{id:"admin_form_uid_input",state:t.formAdminUidState,required:""},on:{blur:t.validateFormAdminUid},model:{value:t.formAdminUid,callback:function(e){t.formAdminUid=e},expression:"formAdminUid"}}),t.formAdminUidState?t._e():o("b-form-text",{attrs:{"text-variant":"danger",tag:"div"}},[t._v("\n        "+t._s(t.formAdminUidServerFeedbackString)+"\n      ")]),o("b-form-checkbox",{model:{value:t.formAdminIsSuper,callback:function(e){t.formAdminIsSuper=e},expression:"formAdminIsSuper"}},[t._v("超级管理员")]),o("label",{attrs:{for:"admin_form_pwd_input"}},[t._v("密码")]),o("b-form-input",{attrs:{type:"password",id:"admin_form_pwd_input",required:""},model:{value:t.formAdminPwd,callback:function(e){t.formAdminPwd=e},expression:"formAdminPwd"}}),o("b-button",{attrs:{disabled:t.addAdminButtonDisabled},on:{click:t.addAdmin}},[t._v("添加")])],1)],1),o("b-modal",{attrs:{id:"msgModal",size:"sm",title:t.msgTitle,"ok-title":"确认","cancel-title":"取消","ok-only":t.msgOkOnly},on:{ok:t.msgOkCallback,cancel:t.msgCancelCallback},model:{value:t.msgVisible,callback:function(e){t.msgVisible=e},expression:"msgVisible"}},[o("p",{class:t.msgClass,domProps:{innerHTML:t._s(t.msg)}})]),o("b-modal",{attrs:{id:"addNoticeModal",title:"添加公告","ok-title":"确认","cancel-title":"取消",size:"xl"},on:{ok:t.addNotice},model:{value:t.addNoticeModalShow,callback:function(e){t.addNoticeModalShow=e},expression:"addNoticeModalShow"}},[o("form",{on:{submit:t.addNotice}},[o("b-form-textarea",{attrs:{rows:"8"},model:{value:t.newNotice,callback:function(e){t.newNotice=e},expression:"newNotice"}}),o("hr"),o("vue-markdown",{attrs:{source:t.newNotice}})],1)])],1)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"py-3"},[o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12 text-center"},[o("p",{staticClass:"mb-0"},[t._v("Writed By 雪靡. All rights reserved | Open Source on "),o("a",{attrs:{href:"https://github.com/736248591/hdu_rank",target:"_blank"}},[t._v("GitHub")])])])])])])}],a=o("9ce6"),i=o.n(a),s=o("1157"),d=o.n(s),l=o("580e"),m=o("c53e"),c=function(t){for(var e=0;e<6;e++){var o=new m("SHA3-512","TEXT",{encoding:"UTF8"});o.update(t),t=o.getHash("HEX")}return t},u={components:{VueMarkdown:i.a},name:"app",data:function(){return{crawlStatus:"",isAdmin:!1,users:[],user:null,admin:null,formUid:"",formUidFeedbackState:null,formUidServerFeedbackString:"",formPwd:"",formConfirmPwd:"",formClassName:"",formUserName:"",formAccount:"",formAccountFeedbackState:null,formAccountServerFeedbackString:"",formMotto:"",loginUid:"",loginPwd:"",loginServerFeedbackState:null,loginServerFeedbackString:"",msg:"",msgClass:"",msgTitle:"",msgOkCallback:function(){},msgCancelCallback:function(){},msgOkOnly:!1,msgVisible:!1,adminPwd:"",adminLoginModalShow:!1,loginModalShow:!1,registerUserModalShow:!1,notice:"",newNotice:"",addNoticeModalShow:!1,changePwdModalShow:!1,changeMottoModalShow:!1,changeUserHtmlModalShow:!1,userHtml:"",isAdminLoginMode:!1,currentEditPwdObj:null,listAdminModalShow:!1,adminList:[],adminFields:[{key:"uid",label:"登录账号",sortable:!0},{key:"is_super",label:"超级管理员",sortable:!0},{key:"operator",label:""}],formAdminUid:"",formAdminUidServerFeedbackState:null,formAdminUidServerFeedbackString:"",formAdminIsSuper:!1,formAdminPwd:""}},methods:{getRank:function(){var t=this;this.$ajax.get("/get_rank").then((function(e){t.users=e["users"],t.newNotice=t.notice=e["notice"],t.user=e["user"],t.admin=e["admin"],t.crawlStatus=e["crawl_status"],t.user&&t.user.html&&d()("body").append(t.user.html)}))},validateFormUid:function(){var t=this;if(this.formUid){this.formUidFeedbackState=!1,this.formUidServerFeedbackString="检测中……";var e={field:"uid",value:this.formUid};this.$ajax.get("/validate_user",{params:e}).then((function(e){t.formUidFeedbackState=e.status,e.status||(t.formUidServerFeedbackString=e.msg)}))}},validateFormAccount:function(){var t=this;if(this.formAccount){this.formAccountFeedbackState=!1,this.formAccountServerFeedbackString="检测中……";var e={field:"account",value:this.formAccount};this.$ajax.get("/validate_user",{params:e}).then((function(e){t.formAccountFeedbackState=e.status,e.status||(t.formAccountServerFeedbackString=e.msg)}))}},formReset:function(){this.formUid="",this.formUidFeedbackState=null,this.formUidServerFeedbackString="",this.formPwd="",this.formConfirmPwd="",this.formClassName="",this.formUserName="",this.formAccount="",this.formAccountFeedbackState=null,this.formAccountServerFeedbackString="",this.formMotto=""},registerUser:function(){var t=this,e=c(this.formPwd),o={uid:this.formUid,pwd:e,class_name:this.formClassName,name:this.formUserName,account:this.formAccount,motto:this.formMotto};this.$ajax.get("/put_user",{params:o}).then((function(e){e.status?t.showMsgModal("提示","注册成功！请返回登录。",(function(){t.formReset(),t.getRank(),t.registerUserModalShow=!1})):t.showMsgModal("错误",e.msg)}))},login:function(t){var e=this;t.preventDefault();var o=c(this.loginPwd),n={uid:this.loginUid,pwd:o},r=this.isAdminLoginMode?"/login_admin":"/login";this.$ajax.get(r,{params:n}).then((function(t){t.status?(e.loginUid=e.loginPwd="",e.getRank(),e.loginModalShow=!1):(e.loginServerFeedbackState=!1,e.loginServerFeedbackString=t.msg)}))},showChangePwdModal:function(t,e){this.currentEditPwdObj={type:t,obj:e},this.changePwdModalShow=!0},closeChangePwdModal:function(){this.currentEditPwdObj=null,this.changePwdModalShow=!1},changePwd:function(t){var e=this;t.preventDefault();var o=c(this.formPwd),n={pwd:o},r="";n.id=this.currentEditPwdObj.obj.id,r="user"===this.currentEditPwdObj.type?"/put_user":"/put_admin",this.$ajax.get(r,{params:n}).then((function(t){t.status?e.currentEditPwdObj.obj!==e.user&&e.currentEditPwdObj.obj!==e.admin?e.showMsgModal("提示","修改成功！",(function(){e.changePwdModalShow=!1})):e.showMsgModal("提示","修改成功！请返回登录。",(function(){e.getRank(),e.changePwdModalShow=!1})):e.showMsgModal("错误",t.msg)}))},changeMotto:function(t){var e=this;t.preventDefault();var o={id:this.user.id,motto:this.formMotto};this.$ajax.get("/put_user",{params:o}).then((function(t){t.status?e.showMsgModal("提示","修改成功！",(function(){e.getRank(),e.changeMottoModalShow=!1})):e.showMsgModal("错误",t.msg)}))},logout:function(){var t=this;this.$ajax.get("/logout").then((function(e){t.getRank()}))},changeUserHtml:function(t){var e=this;t.preventDefault();var o={id:this.user.id,html:this.userHtml};this.$ajax.get("/put_user",{params:o}).then((function(t){t.status?e.showMsgModal("提示","修改成功！",(function(){e.getRank(),location.reload()})):e.showMsgModal("错误",t.msg)}))},remove:function(t){var e=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t||(t=this.user.id);var n=o?"/remove_user":"/remove_admin";this.showMsgModal("提示","是否确认删除？<br/>注意：此操作不可逆！",(function(){e.$ajax.get(n,{params:{id:t}}).then((function(t){t.status?e.getRank():e.showMsgModal("错误",t.msg)}))}),(function(){}),!1)},confirmUser:function(t){var e=this,o={id:t,status:"fetching"};this.$ajax.get("/put_user",{params:o}).then((function(t){t.status?e.getRank():e.showMsgModal("错误",t.msg)}))},getAdminList:function(){var t=this;this.$ajax.get("/list_admin").then((function(e){e.status?t.adminList=e.admins:t.showMsgModal("错误",e.msg)}))},changeSuperAdmin:function(t){var e=this,o={id:t.id,is_super:1-t.is_super};this.$ajax.get("/put_admin",{params:o}).then((function(t){t.status?e.getAdminList():e.showMsgModal("错误",t.msg)}))},addAdminFormReset:function(){this.formAdminUid="",this.formAdminUidServerFeedbackState=null,this.formAdminUidServerFeedbackString="",this.formAdminPwd=""},validateFormAdminUid:function(){var t=this;if(this.formAdminUid){this.formAdminUidServerFeedbackState=!1,this.formAdminUidServerFeedbackString="检测中……";var e={field:"uid",value:this.formAdminUid};this.$ajax.get("/validate_admin",{params:e}).then((function(e){t.formAdminUidServerFeedbackState=e.status,e.status||(t.formAdminUidServerFeedbackString=e.msg)}))}},addAdmin:function(){var t=this,e=c(this.formAdminPwd),o={uid:this.formAdminUid,pwd:e,is_super:this.formAdminIsSuper?1:0};this.$ajax.get("/put_admin",{params:o}).then((function(e){e.status?(t.addAdminFormReset(),t.getAdminList()):t.showMsgModal("错误",e.msg)}))},beginCrawl:function(){var t=this;this.$ajax.get("/crawl_start").then((function(e){e.status?t.getRank():t.showMsgModal("错误",e["msg"])}))},stopCrawl:function(){var t=this;this.$ajax.get("/crawl_stop").then((function(e){e.status?t.getRank():t.showMsgModal("错误",e["msg"])}))},showMsgModal:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.msgTitle=t,this.msg=e,this.msgOkCallback=o,this.msgCancelCallback=n,this.msgOkOnly=r,this.msgVisible=!0},addNotice:function(t){var e=this;t.preventDefault();var o={notice:this.newNotice};this.$ajax.get("/add_notice",{params:o}).then((function(t){t.status?e.showMsgModal("提示","操作成功！",(function(){e.addNoticeModalShow=!1,e.getRank()})):e.showMsgModal("错误",t["msg"])}))},userScoreString:function(t){return t.solved_num?t.solved_num:"unchecked"===t.status?"未确认":"fetching"===t.status?"爬取中":void 0}},computed:{crawlStatusString:function(){return"runnable"===this.crawlStatus?"未运行":"running"===this.crawlStatus?"正在运行":"sleeping"===this.crawlStatus?"睡眠中":"stopped"===this.crawlStatus?"已停止":"disconnect"===this.crawlStatus?"未连接":""},crawlStatusClass:function(){return"disconnect"===this.crawlStatus?"text-danger":"stopped"===this.crawlStatus?"text-warning":"text-primary"},formUidState:function(){return this.formUid?this.formUid.length>1&&this.formUid.length<=16&&!1!==this.formUidFeedbackState:null},formPwdState:function(){var t=/\d+/,e=/[a-zA-Z]+/;return this.formPwd?this.formPwd.length>8&&t.test(this.formPwd)&&e.test(this.formPwd):null},formPwdFeedbackString:function(){if(this.formPwd.length<8)return"长度不得小于8";var t=/\d+/;if(!t.test(this.formPwd))return"必须包含数字";var e=/[a-zA-Z]+/;return e.test(this.formPwd)?"":"必须包含字母"},formPwdStrengthScore:function(){var t=l(this.formPwd);return t.score+1},formPwdProgressVariant:function(){var t=this.formPwdStrengthScore;return t<2?"danger":t<4?"warning":"success"},formConfirmPwdState:function(){return this.formConfirmPwd?this.formConfirmPwd===this.formPwd:null},formClassNameState:function(){return this.formClassName?this.formClassName.length<=24:null},formUserNameState:function(){return this.formUserName?this.formUserName.length>1&&this.formUserName.length<=16:null},formAccountState:function(){return this.formAccount?this.formAccount.length>=1&&this.formAccount.length<=64&&!1!==this.formAccountFeedbackState:null},formMottoState:function(){return this.formMotto?this.formMotto.length<=255:null},loginModalOkDisabled:function(){return!(this.loginUid&&this.loginPwd&&!1!==this.loginServerFeedbackState)},addUserModalOkDisabled:function(){return!(this.formUidState&&this.formPwdState&&this.formConfirmPwdState&&!1!==this.formClassNameState&&this.formUserNameState&&this.formAccountState&&!1!==this.formMottoState)},changePwdModalOkDisabled:function(){return!(this.formPwdState&&this.formConfirmPwdState)},changeMottoModalOkDisabled:function(){return!(!1!==this.formMottoState)},userTableFields:function(){var t=[{key:"index",label:" "},{key:"class_name",label:"班级",sortable:!0,thClass:"rank-td",tdClass:"rank-td"},{key:"name",label:"姓名",sortable:!0,thClass:"rank-td",tdClass:"rank-td"},{key:"motto",label:"格言",tdClass:"table-text-wrap",thClass:"rank-td"},{key:"solved_num",label:"题数",sortable:!0,thClass:"rank-td",tdClass:"rank-td"}];return this.admin&&t.push({key:"uid",label:"登录账号",thClass:"rank-td",tdClass:"rank-td"},{key:"account",label:"杭电账号",thClass:"rank-td",tdClass:"rank-td"},{key:"operator",label:"",thClass:"rank-td",tdClass:"rank-td"}),t},formAdminUidState:function(){return this.formAdminUid?this.formAdminUid.length>=1&&this.formAdminUid.length<=16&&!1!==this.formAdminUidServerFeedbackState:null},addAdminButtonDisabled:function(){return!(this.formAdminUidState&&this.formAdminPwd)}},created:function(){},mounted:function(){var t=this;this.$ajax.interceptors.response.use((function(t){return t.data}),(function(e){return t.showMsgModal("服务器错误",e),Promise.reject(e)})),this.getRank()},beforeDestroy:function(){this.formMotto.destroy()}},f=u,h=(o("5c0b"),o("2877")),b=Object(h["a"])(f,n,r,!1,null,null,null);e["a"]=b.exports},"56d7":function(t,e,o){"use strict";o.r(e),function(t){o("cadf"),o("551c"),o("f751"),o("097d");var e=o("2b0e"),n=o("3dfd"),r=o("5f5b"),a=o("b1e0"),i=(o("f9e3"),o("2dd8"),o("a2f0"),o("bc3a")),s=o.n(i),d=(o("c197"),o("a878"),o("431a")),l=o.n(d);o("fdfb");e["default"].config.productionTip=!1,e["default"].component("prism-editor",l.a),e["default"].use(r["a"]),e["default"].use(a["a"]);var m=s.a.create({baseURL:"/api/"});m.defaults.withCredentials=!0,e["default"].prototype.$ajax=m,new e["default"]({render:function(t){return t(n["a"])}}).$mount("#app")}.call(this,o("f28c"))},"5c0b":function(t,e,o){"use strict";o("e332")},a2f0:function(t,e,o){},e332:function(t,e,o){}});